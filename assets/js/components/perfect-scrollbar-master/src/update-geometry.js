import*as CSS from"./lib/css";import*as DOM from"./lib/dom";import cls from"./lib/class-names";import{toInt}from"./lib/util";export default function(t){var l=t.element,r=Math.floor(l.scrollTop),i=l.getBoundingClientRect();t.containerWidth=Math.ceil(i.width),t.containerHeight=Math.ceil(i.height),t.contentWidth=l.scrollWidth,t.contentHeight=l.scrollHeight,l.contains(t.scrollbarXRail)||(DOM.queryChildren(l,cls.element.rail("x")).forEach(t=>DOM.remove(t)),l.appendChild(t.scrollbarXRail)),l.contains(t.scrollbarYRail)||(DOM.queryChildren(l,cls.element.rail("y")).forEach(t=>DOM.remove(t)),l.appendChild(t.scrollbarYRail)),!t.settings.suppressScrollX&&t.containerWidth+t.settings.scrollXMarginOffset<t.contentWidth?(t.scrollbarXActive=!0,t.railXWidth=t.containerWidth-t.railXMarginWidth,t.railXRatio=t.containerWidth/t.railXWidth,t.scrollbarXWidth=getThumbSize(t,toInt(t.railXWidth*t.containerWidth/t.contentWidth)),t.scrollbarXLeft=toInt((t.negativeScrollAdjustment+l.scrollLeft)*(t.railXWidth-t.scrollbarXWidth)/(t.contentWidth-t.containerWidth))):t.scrollbarXActive=!1,!t.settings.suppressScrollY&&t.containerHeight+t.settings.scrollYMarginOffset<t.contentHeight?(t.scrollbarYActive=!0,t.railYHeight=t.containerHeight-t.railYMarginHeight,t.railYRatio=t.containerHeight/t.railYHeight,t.scrollbarYHeight=getThumbSize(t,toInt(t.railYHeight*t.containerHeight/t.contentHeight)),t.scrollbarYTop=toInt(r*(t.railYHeight-t.scrollbarYHeight)/(t.contentHeight-t.containerHeight))):t.scrollbarYActive=!1,t.scrollbarXLeft>=t.railXWidth-t.scrollbarXWidth&&(t.scrollbarXLeft=t.railXWidth-t.scrollbarXWidth),t.scrollbarYTop>=t.railYHeight-t.scrollbarYHeight&&(t.scrollbarYTop=t.railYHeight-t.scrollbarYHeight),updateCss(l,t),t.scrollbarXActive?l.classList.add(cls.state.active("x")):(l.classList.remove(cls.state.active("x")),t.scrollbarXWidth=0,t.scrollbarXLeft=0,l.scrollLeft=!0===t.isRtl?t.contentWidth:0),t.scrollbarYActive?l.classList.add(cls.state.active("y")):(l.classList.remove(cls.state.active("y")),t.scrollbarYHeight=0,t.scrollbarYTop=0,l.scrollTop=0)}function getThumbSize(t,l){return t.settings.minScrollbarLength&&(l=Math.max(l,t.settings.minScrollbarLength)),t.settings.maxScrollbarLength?Math.min(l,t.settings.maxScrollbarLength):l}function updateCss(t,l){var r={width:l.railXWidth},i=Math.floor(t.scrollTop),r=(l.isRtl?r.left=l.negativeScrollAdjustment+t.scrollLeft+l.containerWidth-l.contentWidth:r.left=t.scrollLeft,l.isScrollbarXUsingBottom?r.bottom=l.scrollbarXBottom-i:r.top=l.scrollbarXTop+i,CSS.set(l.scrollbarXRail,r),{top:i,height:l.railYHeight});l.isScrollbarYUsingRight?l.isRtl?r.right=l.contentWidth-(l.negativeScrollAdjustment+t.scrollLeft)-l.scrollbarYRight-l.scrollbarYOuterWidth-9:r.right=l.scrollbarYRight-t.scrollLeft:l.isRtl?r.left=l.negativeScrollAdjustment+t.scrollLeft+2*l.containerWidth-l.contentWidth-l.scrollbarYLeft-l.scrollbarYOuterWidth:r.left=l.scrollbarYLeft+t.scrollLeft,CSS.set(l.scrollbarYRail,r),CSS.set(l.scrollbarX,{left:l.scrollbarXLeft,width:l.scrollbarXWidth-l.railBorderXWidth}),CSS.set(l.scrollbarY,{top:l.scrollbarYTop,height:l.scrollbarYHeight-l.railBorderYWidth})}