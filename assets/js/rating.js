const eventName="feedback-submit",submitRating=()=>{const t=document.querySelector("#rating-feedback");t.innerHTML="";var e=[location.protocol,"//",location.host,location.pathname].join("");let n=document.querySelector("title").innerText;n?.includes("Risultati della ricerca per")&&(n="Risultati di ricerca");var a=document.querySelector('input[name="ratingA"]:checked')?.value||null,r=3<a?document.querySelector('input[name="rating1"]:checked'):document.querySelector('input[name="rating2"]:checked'),r=(r?r.parentElement:null)?.querySelector("label")?.innerHTML||null,o=document.querySelector("#formGroupExampleInputWithHelp")?.value||null,a={title:n,star:a,radioResponse:r,freeText:o,page:e};fetch(data.ajaxurl,{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/x-www-form-urlencoded","Cache-Control":"no-cache"},body:new URLSearchParams({action:"save_rating",...a})}).then(e=>{if(!e.ok)throw new Error("");t.innerHTML="Grazie, il tuo parere ci aiuterà a migliorare il servizio!"}).catch(e=>{t.innerHTML="Ops, qualcosa è andato storto."})};document.addEventListener(eventName,()=>submitRating());