const eventName="feedback-submit",submitRating=()=>{const t=document.querySelector("#rating-feedback");t.innerHTML="";var e=[location.protocol,"//",location.host,location.pathname].join("");let n=document.querySelector("title").innerText;n?.includes("Risultati della ricerca per")&&(n="Risultati di ricerca");var a=((a=3<(o=document.querySelector('input[name="ratingA"]:checked')?.value||null)?document.querySelector('input[name="rating1"]:checked'):document.querySelector('input[name="rating2"]:checked'))?a.parentElement:null)?.querySelector("label")?.innerHTML||null,r=document.querySelector("#formGroupExampleInputWithHelp")?.value||null,o={title:n,star:o,radioResponse:a,freeText:r,page:e};fetch(data.ajaxurl,{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/x-www-form-urlencoded","Cache-Control":"no-cache"},body:new URLSearchParams({action:"save_rating",...o})}).then(e=>{if(!e.ok)throw new Error("");t.innerHTML="Grazie, il tuo parere ci aiuterà a migliorare il servizio!"}).catch(e=>{t.innerHTML="Ops, qualcosa è andato storto."})};document.addEventListener(eventName,()=>submitRating());